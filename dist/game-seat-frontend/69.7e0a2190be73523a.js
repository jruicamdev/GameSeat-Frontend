"use strict";(self.webpackChunkgameseat_frontend=self.webpackChunkgameseat_frontend||[]).push([[69],{2069:(L,_,i)=>{i.r(_),i.d(_,{LoginComponent:()=>M});var d=i(467),E=i(177),r=i(4438),a=i(9417),c=i(5416),p=i(9012),f=i(8834),u=i(2102),h=i(9213),g=i(9631),s=i(9969),v=i(7044),b=i(4796),F=i(9885);function C(e,m){1&e&&(r.j41(0,"mat-error"),r.EFF(1,"Email not valid"),r.k0s())}function I(e,m){if(1&e){const n=r.RV6();r.j41(0,"form",6),r.bIt("ngSubmit",function(){r.eBV(n);const t=r.XpG();return r.Njj(t.logIn())}),r.j41(1,"div",7)(2,"mat-form-field",8)(3,"mat-label"),r.EFF(4,"Email"),r.k0s(),r.nrm(5,"input",9),r.DNE(6,C,2,0,"mat-error",10),r.k0s()(),r.j41(7,"div")(8,"mat-form-field",8)(9,"mat-label"),r.EFF(10,"Enter your password"),r.k0s(),r.nrm(11,"input",11),r.j41(12,"mat-error"),r.EFF(13,"This field can't be empty"),r.k0s()()(),r.j41(14,"div")(15,"button",12),r.EFF(16,"Log in"),r.k0s()(),r.j41(17,"p"),r.EFF(18,"O"),r.k0s(),r.j41(19,"button",13),r.bIt("click",function(){r.eBV(n);const t=r.XpG();return r.Njj(t.toggleForm())}),r.EFF(20,"Crear una cuenta"),r.k0s()()}if(2&e){let n;const o=r.XpG();r.Y8G("formGroup",o.logInForm),r.R7$(6),r.Y8G("ngIf",null==(n=o.signUpForm.get("email"))||null==n.errors?null:n.errors.email),r.R7$(5),r.Y8G("type",o.hide?"password":"text"),r.R7$(4),r.Y8G("disabled",!o.logInForm.valid)}}function k(e,m){1&e&&(r.j41(0,"mat-error"),r.EFF(1,"This field is required"),r.k0s())}function P(e,m){1&e&&(r.j41(0,"mat-error"),r.EFF(1,"Password must be at least 6 characters"),r.k0s())}function O(e,m){if(1&e){const n=r.RV6();r.j41(0,"form",15),r.bIt("ngSubmit",function(){r.eBV(n);const t=r.XpG(2);return r.Njj(t.signUp())}),r.j41(1,"div")(2,"mat-form-field",8)(3,"mat-label"),r.EFF(4,"Usuario"),r.k0s(),r.nrm(5,"input",16),r.j41(6,"mat-error"),r.EFF(7,"This field is required"),r.k0s()()(),r.j41(8,"div")(9,"mat-form-field",8)(10,"mat-label"),r.EFF(11,"Email"),r.k0s(),r.nrm(12,"input",9),r.k0s()(),r.j41(13,"div")(14,"mat-form-field",8)(15,"mat-label"),r.EFF(16,"Enter your password"),r.k0s(),r.nrm(17,"input",11),r.DNE(18,k,2,0,"mat-error",10)(19,P,2,0,"mat-error",10),r.k0s()(),r.j41(20,"div")(21,"button",12),r.EFF(22,"Sign up"),r.k0s()(),r.j41(23,"p"),r.EFF(24,"O"),r.k0s(),r.j41(25,"button",13),r.bIt("click",function(){r.eBV(n);const t=r.XpG(2);return r.Njj(t.toggleForm())}),r.EFF(26,"Iniciar Sesi\xf3n"),r.k0s()()}if(2&e){let n,o;const t=r.XpG(2);r.Y8G("formGroup",t.signUpForm),r.R7$(17),r.Y8G("type",t.hide?"password":"text"),r.R7$(),r.Y8G("ngIf",null==(n=t.signUpForm.get("password"))||null==n.errors?null:n.errors.required),r.R7$(),r.Y8G("ngIf",null==(o=t.signUpForm.get("password"))||null==o.errors?null:o.errors.minLength),r.R7$(2),r.Y8G("disabled",!t.signUpForm.valid)}}function U(e,m){if(1&e&&r.DNE(0,O,27,5,"form",14),2&e){const n=r.XpG();r.Y8G("ngIf",!n.showLogin)}}let M=(()=>{class e{constructor(n,o,t,l){this._snackBar=n,this.router=o,this.authService=t,this.userService=l,this.formBuilder=(0,r.WQX)(a.ok),this.showLogin=!0,this.hide=!0,this.signUpForm=this.formBuilder.group({userName:this.formBuilder.control("",{validators:a.k0.required,nonNullable:!0}),email:this.formBuilder.control("",{validators:[a.k0.required,a.k0.email],nonNullable:!0}),password:this.formBuilder.control("",{validators:[a.k0.required,a.k0.minLength(6)],nonNullable:!0})}),this.logInForm=this.formBuilder.group({email:this.formBuilder.control("",{validators:[a.k0.required,a.k0.email],nonNullable:!0}),password:this.formBuilder.control("",{validators:[a.k0.required],nonNullable:!0})})}toggleForm(){this.showLogin=!this.showLogin}get flipState(){return this.showLogin?"default":"flipped"}signUp(){var n=this;return(0,d.A)(function*(){if(n.signUpForm.invalid)return;const o={email:n.signUpForm.value.email||"",password:n.signUpForm.value.password||""};try{yield n.authService.signUpWithEmailAndPassword(o);const t=n._snackBar.open(""),l={username:n.signUpForm.value.userName,email:n.signUpForm.value.email,password:n.signUpForm.value.password};if(null==l.username||null==l.email||null==l.password)return;yield n.userService.createUserAPI(l),t.afterDismissed().subscribe(()=>{n.router.navigateByUrl("/reservations")})}catch{n._snackBar.open("Registro no valido","Cerrar",{duration:2500,verticalPosition:"bottom",horizontalPosition:"center"})}})()}logIn(){var n=this;return(0,d.A)(function*(){if(n.logInForm.invalid)return;const o={email:n.logInForm.value.email||"",password:n.logInForm.value.password||""};try{const t=yield n.authService.logInWithEmailAndPassword(o);t?(console.log(t),n._snackBar.open("Inicio de sesi\xf3n exitoso","Cerrar",{duration:3e3}),n.router.navigateByUrl("/reservations")):n._snackBar.open("Inicio de sesi\xf3n fallido","Cerrar",{duration:3e3})}catch(t){console.error(t),n._snackBar.open("Error al iniciar sesi\xf3n","Cerrar",{duration:3e3})}})()}isEmailValidSignUp(){const n=this.signUpForm.get("email");return!(!n?.invalid||!n.touched)&&(n?.hasError("required")?"This field is required":"Enter a valid email")}isEmailValidLogIn(){const n=this.logInForm.get("email");return!(!n?.invalid||!n.touched)&&(n?.hasError("required")?"This field is required":"Enter a valid email")}static#r=this.\u0275fac=function(o){return new(o||e)(r.rXU(c.UG),r.rXU(p.Ix),r.rXU(b.u),r.rXU(F.D))};static#n=this.\u0275cmp=r.VBU({type:e,selectors:[["app-login"]],standalone:!0,features:[r.aNF],decls:12,vars:5,consts:[["signUpFormTemplate",""],[1,"background"],[1,"container"],[1,"auth-container"],[1,"form-container"],["class","front",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[1,"front",3,"ngSubmit","formGroup"],[1,"field"],["appearance","outline"],["matInput","","formControlName","email"],[4,"ngIf"],["matInput","","formControlName","password",3,"type"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["type","button",3,"click"],["class","back",3,"formGroup","ngSubmit",4,"ngIf"],[1,"back",3,"ngSubmit","formGroup"],["matInput","","formControlName","userName"]],template:function(o,t){if(1&o&&(r.j41(0,"div",1),r.nrm(1,"app-toolbar"),r.j41(2,"div",2)(3,"h2"),r.EFF(4,"Inicia Sesi\xf3n o Crea una Cuenta"),r.k0s(),r.j41(5,"h3"),r.EFF(6,"Y podr\xe1s disfrutar de una experiencia inolvidable"),r.k0s(),r.j41(7,"div",3)(8,"div",4),r.DNE(9,I,21,4,"form",5),r.k0s(),r.DNE(10,U,1,1,"ng-template",null,0,r.C5r),r.k0s()()()),2&o){const l=r.sdS(11);r.R7$(8),r.AVh("show-login",t.showLogin),r.Y8G("@flipState",t.flipState),r.R7$(),r.Y8G("ngIf",t.showLogin)("ngIfElse",l)}},dependencies:[u.RG,u.rl,u.nJ,u.TL,g.fS,g.fg,h.m_,f.Hl,f.$z,a.X1,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,p.iI,E.bT,c._T,v.H],styles:[".background[_ngcontent-%COMP%]{background-color:#272626;height:100vh}.container[_ngcontent-%COMP%]{background-color:#272626;color:#fff;display:flex;justify-content:center;align-items:center;flex-direction:column;margin:0}.auth-container[_ngcontent-%COMP%]{background:#232323;border-radius:8px;box-shadow:0 4px 8px #0000001a;width:100%;max-width:400px;padding:20px}.mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}input[matInput][_ngcontent-%COMP%]{padding:5px;border:2px solid #555;border-radius:4px;background-color:#333;color:#fff;transition:border-color .3s}input[matInput][_ngcontent-%COMP%]:focus{border-color:#06f}mat-label[_ngcontent-%COMP%]{color:#bbb}mat-error[_ngcontent-%COMP%]{color:#f66}button[_ngcontent-%COMP%]{cursor:pointer;width:100%;padding:12px;border:none;border-radius:4px;background-color:#e91e63;color:#fff;font-size:16px;text-transform:uppercase;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{background-color:#2a12af}button[type=button][_ngcontent-%COMP%]{background-color:#09d416}button[type=submit][_ngcontent-%COMP%]:disabled{color:#fff}button[type=button][_ngcontent-%COMP%]:hover{background-color:#616161}p[_ngcontent-%COMP%]{text-align:center;color:#fff;margin:20px 0}.back[_ngcontent-%COMP%]{transform:rotateY(180deg)}"],data:{animation:[(0,s.hZ)("flipState",[(0,s.wk)("default",(0,s.iF)({transform:"rotateY(0deg)"})),(0,s.wk)("flipped",(0,s.iF)({transform:"rotateY(180deg)"})),(0,s.kY)("default => flipped",(0,s.i0)("500ms ease-out")),(0,s.kY)("flipped => default",(0,s.i0)("500ms ease-in"))])]}})}return e})()}}]);