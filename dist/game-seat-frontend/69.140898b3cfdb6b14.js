"use strict";(self.webpackChunkgameseat_frontend=self.webpackChunkgameseat_frontend||[]).push([[69],{2069:(O,d,a)=>{a.r(d),a.d(d,{LoginComponent:()=>L});var p=a(467),I=a(177),t=a(4438),i=a(9417),g=a(5416),f=a(9012),E=a(8834),m=a(2102),h=a(9213),l=a(9969),b=a(7044),u=a(3955),R=a(9631),A=a(4796),T=a(9885);function C(o,_){1&o&&(t.j41(0,"mat-error"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o&&(t.R7$(),t.JRh(t.bMT(2,1,"AUTH.EMAIL_ERROR")))}function U(o,_){if(1&o){const n=t.RV6();t.j41(0,"form",6),t.bIt("ngSubmit",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.logIn())}),t.j41(1,"div",7)(2,"mat-form-field",8)(3,"mat-label"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.nrm(6,"input",9),t.DNE(7,C,3,3,"mat-error",10),t.k0s()(),t.j41(8,"div")(9,"mat-form-field",8)(10,"mat-label"),t.EFF(11),t.nI1(12,"translate"),t.k0s(),t.nrm(13,"input",11),t.j41(14,"mat-error"),t.EFF(15),t.nI1(16,"translate"),t.k0s()()(),t.j41(17,"div")(18,"button",12),t.EFF(19),t.nI1(20,"translate"),t.k0s()(),t.j41(21,"p"),t.EFF(22),t.nI1(23,"translate"),t.k0s(),t.j41(24,"button",13),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.toggleForm())}),t.EFF(25),t.nI1(26,"translate"),t.k0s()()}if(2&o){let n;const r=t.XpG();t.Y8G("formGroup",r.logInForm),t.R7$(4),t.JRh(t.bMT(5,10,"AUTH.EMAIL")),t.R7$(3),t.Y8G("ngIf",null==(n=r.signUpForm.get("email"))||null==n.errors?null:n.errors.email),t.R7$(4),t.JRh(t.bMT(12,12,"AUTH.PASSWORD")),t.R7$(2),t.Y8G("type",r.hide?"password":"text"),t.R7$(2),t.JRh(t.bMT(16,14,"AUTH.FIELD_REQUIRED")),t.R7$(3),t.Y8G("disabled",!r.logInForm.valid),t.R7$(),t.JRh(t.bMT(20,16,"AUTH.LOGIN")),t.R7$(3),t.JRh(t.bMT(23,18,"AUTH.OR")),t.R7$(3),t.JRh(t.bMT(26,20,"AUTH.CREATE_ACCOUNT"))}}function S(o,_){1&o&&(t.j41(0,"mat-error"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o&&(t.R7$(),t.JRh(t.bMT(2,1,"AUTH.FIELD_REQUIRED")))}function F(o,_){1&o&&(t.j41(0,"mat-error"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o&&(t.R7$(),t.JRh(t.bMT(2,1,"AUTH.PASSWORD_MINLENGTH")))}function M(o,_){if(1&o){const n=t.RV6();t.j41(0,"form",15),t.bIt("ngSubmit",function(){t.eBV(n);const e=t.XpG(2);return t.Njj(e.signUp())}),t.j41(1,"div")(2,"mat-form-field",8)(3,"mat-label"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.nrm(6,"input",16),t.j41(7,"mat-error"),t.EFF(8),t.nI1(9,"translate"),t.k0s()()(),t.j41(10,"div")(11,"mat-form-field",8)(12,"mat-label"),t.EFF(13),t.nI1(14,"translate"),t.k0s(),t.nrm(15,"input",9),t.k0s()(),t.j41(16,"div")(17,"mat-form-field",8)(18,"mat-label"),t.EFF(19),t.nI1(20,"translate"),t.k0s(),t.nrm(21,"input",11),t.DNE(22,S,3,3,"mat-error",10)(23,F,3,3,"mat-error",10),t.k0s()(),t.j41(24,"div")(25,"button",12),t.EFF(26),t.nI1(27,"translate"),t.k0s()(),t.j41(28,"p"),t.EFF(29),t.nI1(30,"translate"),t.k0s(),t.j41(31,"button",13),t.bIt("click",function(){t.eBV(n);const e=t.XpG(2);return t.Njj(e.toggleForm())}),t.EFF(32),t.nI1(33,"translate"),t.k0s()()}if(2&o){let n,r;const e=t.XpG(2);t.Y8G("formGroup",e.signUpForm),t.R7$(4),t.JRh(t.bMT(5,12,"AUTH.USERNAME")),t.R7$(4),t.JRh(t.bMT(9,14,"AUTH.FIELD_REQUIRED")),t.R7$(5),t.JRh(t.bMT(14,16,"AUTH.EMAIL")),t.R7$(6),t.JRh(t.bMT(20,18,"AUTH.PASSWORD")),t.R7$(2),t.Y8G("type",e.hide?"password":"text"),t.R7$(),t.Y8G("ngIf",null==(n=e.signUpForm.get("password"))||null==n.errors?null:n.errors.required),t.R7$(),t.Y8G("ngIf",null==(r=e.signUpForm.get("password"))||null==r.errors?null:r.errors.minLength),t.R7$(2),t.Y8G("disabled",!e.signUpForm.valid),t.R7$(),t.JRh(t.bMT(27,20,"AUTH.SIGNUP")),t.R7$(3),t.JRh(t.bMT(30,22,"AUTH.OR")),t.R7$(3),t.JRh(t.bMT(33,24,"AUTH.LOGIN"))}}function v(o,_){if(1&o&&t.DNE(0,M,34,26,"form",14),2&o){const n=t.XpG();t.Y8G("ngIf",!n.showLogin)}}let L=(()=>{class o{constructor(n,r,e,s,c){this._snackBar=n,this.router=r,this.authService=e,this.userService=s,this.translate=c,this.formBuilder=(0,t.WQX)(i.ok),this.showLogin=!0,this.hide=!0,this.signUpForm=this.formBuilder.group({userName:this.formBuilder.control("",{validators:i.k0.required,nonNullable:!0}),email:this.formBuilder.control("",{validators:[i.k0.required,i.k0.email],nonNullable:!0}),password:this.formBuilder.control("",{validators:[i.k0.required,i.k0.minLength(6)],nonNullable:!0})}),this.logInForm=this.formBuilder.group({email:this.formBuilder.control("",{validators:[i.k0.required,i.k0.email],nonNullable:!0}),password:this.formBuilder.control("",{validators:[i.k0.required],nonNullable:!0})})}toggleForm(){this.showLogin=!this.showLogin}get flipState(){return this.showLogin?"default":"flipped"}signUp(){var n=this;return(0,p.A)(function*(){if(n.signUpForm.invalid)return;const r={email:n.signUpForm.value.email||"",password:n.signUpForm.value.password||""};try{yield n.authService.signUpWithEmailAndPassword(r);const e=n._snackBar.open(""),s={username:n.signUpForm.value.userName,email:n.signUpForm.value.email,password:n.signUpForm.value.password};if(null==s.username||null==s.email||null==s.password)return;yield n.userService.createUserAPI(s),n.translate.get("SNACKBARS.SIGNUP_SUCCESS").subscribe(c=>{n._snackBar.open(c,n.translate.instant("SNACKBARS.CLOSE"),{duration:3e3})}),e.afterDismissed().subscribe(()=>{n.router.navigateByUrl("/reservations")})}catch{n.translate.get("SNACKBARS.INVALID_REGISTRATION").subscribe(s=>{n._snackBar.open(s,n.translate.instant("SNACKBARS.CLOSE"),{duration:2500,verticalPosition:"bottom",horizontalPosition:"center"})})}})()}logIn(){var n=this;return(0,p.A)(function*(){if(n.logInForm.invalid)return;const r={email:n.logInForm.value.email||"",password:n.logInForm.value.password||""};try{(yield n.authService.logInWithEmailAndPassword(r))?(n.translate.get("SNACKBARS.LOGIN_SUCCESS").subscribe(s=>{n._snackBar.open(s,n.translate.instant("SNACKBARS.CLOSE"),{duration:3e3})}),n.router.navigateByUrl("/reservations")):n.translate.get("SNACKBARS.LOGIN_FAILED").subscribe(s=>{n._snackBar.open(s,n.translate.instant("SNACKBARS.CLOSE"),{duration:3e3})})}catch(e){console.error(e),n.translate.get("SNACKBARS.LOGIN_ERROR").subscribe(s=>{n._snackBar.open(s,n.translate.instant("SNACKBARS.CLOSE"),{duration:3e3})})}})()}isEmailValidSignUp(){const n=this.signUpForm.get("email");return!(!n?.invalid||!n.touched)&&(n?.hasError("required")?this.translate.instant("SNACKBARS.FIELD_REQUIRED"):this.translate.instant("SNACKBARS.ENTER_VALID_EMAIL"))}isEmailValidLogIn(){const n=this.logInForm.get("email");return!(!n?.invalid||!n.touched)&&(n?.hasError("required")?this.translate.instant("SNACKBARS.FIELD_REQUIRED"):this.translate.instant("SNACKBARS.ENTER_VALID_EMAIL"))}static#t=this.\u0275fac=function(r){return new(r||o)(t.rXU(g.UG),t.rXU(f.Ix),t.rXU(A.u),t.rXU(T.D),t.rXU(u.c$))};static#n=this.\u0275cmp=t.VBU({type:o,selectors:[["app-login"]],standalone:!0,features:[t.aNF],decls:14,vars:11,consts:[["signUpFormTemplate",""],[1,"background"],[1,"container"],[1,"auth-container"],[1,"form-container"],["class","front",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[1,"front",3,"ngSubmit","formGroup"],[1,"field"],["appearance","outline"],["matInput","","formControlName","email"],[4,"ngIf"],["matInput","","formControlName","password",3,"type"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["type","button",3,"click"],["class","back",3,"formGroup","ngSubmit",4,"ngIf"],[1,"back",3,"ngSubmit","formGroup"],["matInput","","formControlName","userName"]],template:function(r,e){if(1&r&&(t.j41(0,"div",1),t.nrm(1,"app-toolbar"),t.j41(2,"div",2)(3,"h2"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"h3"),t.EFF(7),t.nI1(8,"translate"),t.k0s(),t.j41(9,"div",3)(10,"div",4),t.DNE(11,U,27,22,"form",5),t.k0s(),t.DNE(12,v,1,1,"ng-template",null,0,t.C5r),t.k0s()()()),2&r){const s=t.sdS(13);t.R7$(4),t.JRh(t.bMT(5,7,"AUTH.TITLE")),t.R7$(3),t.JRh(t.bMT(8,9,"AUTH.SUBTITLE")),t.R7$(3),t.AVh("show-login",e.showLogin),t.Y8G("@flipState",e.flipState),t.R7$(),t.Y8G("ngIf",e.showLogin)("ngIfElse",s)}},dependencies:[m.RG,m.rl,m.nJ,m.TL,R.fS,R.fg,h.m_,E.Hl,E.$z,i.X1,i.qT,i.me,i.BC,i.cb,i.j4,i.JD,f.iI,I.bT,g._T,b.H,u.h,u.D9],styles:[".background[_ngcontent-%COMP%]{background-color:#021832;height:100vh}.container[_ngcontent-%COMP%]{color:#fff;display:flex;justify-content:center;align-items:center;flex-direction:column;margin:0}.auth-container[_ngcontent-%COMP%]{background:#f6b83c;border-radius:8px;box-shadow:0 4px 8px #0000001a;width:100%;max-width:400px;padding:20px}.mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}input[matInput][_ngcontent-%COMP%]{padding:5px;border:2px solid #555;border-radius:4px;color:#fff;transition:border-color .3s}input[matInput][_ngcontent-%COMP%]:focus{border-color:#06f}mat-label[_ngcontent-%COMP%]{color:#e0e0e0}mat-error[_ngcontent-%COMP%]{color:#f66}button[_ngcontent-%COMP%]{cursor:pointer;width:100%;padding:12px;border:none;border-radius:4px;background-color:#e91e63;color:#fff;font-size:16px;text-transform:uppercase;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{background-color:#2a12af}button[type=button][_ngcontent-%COMP%]{background-color:#09d416}button[type=submit][_ngcontent-%COMP%]:disabled{color:#fff}button[type=button][_ngcontent-%COMP%]:hover{background-color:#616161}p[_ngcontent-%COMP%]{text-align:center;color:#fff;margin:20px 0}.back[_ngcontent-%COMP%]{transform:rotateY(180deg)}"],data:{animation:[(0,l.hZ)("flipState",[(0,l.wk)("default",(0,l.iF)({transform:"rotateY(0deg)"})),(0,l.wk)("flipped",(0,l.iF)({transform:"rotateY(180deg)"})),(0,l.kY)("default => flipped",(0,l.i0)("500ms ease-out")),(0,l.kY)("flipped => default",(0,l.i0)("500ms ease-in"))])]}})}return o})()}}]);